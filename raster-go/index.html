<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        html, body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>
<body>
<button onclick="prev()">上一步</button>

<button onclick="next()">下一步</button>

<button onclick="runOrPause()">run/pause</button>
<label id="pngIndex"></label>

<img id="dia" src="out/angle/tri_diffuse_3.png" width="100%" height="100%">
</body>


<script>

    window.onload = () => {
        i = 0
        setPng()
        runOrPause()
    }

    const setPng = () => {
        if (i >= 360) i = 0;
        if (i < 0) i = 359;
        document.getElementById("dia").src = `out/angle/tri_diffuse_${i}.png`;
        document.getElementById("pngIndex").innerText = `${i}`
    }

    let i = 0;

    let prev = () => {
        i--;
        setPng(i)
    }

    let next = () => {
        i++;
        setPng(i)
    }

    let paused = true;
    let runOrPause = ()=>{
        if(paused){
            run()
        }else{
            pause()
        }
        paused = !paused;
    }

    let id = 0;
    let run = () => {
        next()
        id = requestAnimationFrame(run)
    }

    let pause = () => {
        cancelAnimationFrame(id)
    }


</script>
</html>